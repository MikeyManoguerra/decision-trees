630910904034dd795c9a604e966ef736
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.registerUser = void 0;

var _reduxForm = require("redux-form");

var _config = require("../config");

var _utils = require("../utils");

const registerUser = user => dispatch => {
  return fetch(`${_config.API_BASE_URL}/users`, {
    method: 'POST',
    headers: {
      'content-type': 'application/json'
    },
    body: JSON.stringify(user)
  }).then(res => (0, _utils.normalizeResponseErrors)(res)).then(res => res.json()).catch(err => {
    const reason = err.reason,
          message = err.message,
          location = err.location;

    if (reason === 'ValidationError') {
      //Convert ValidationErrors into SubmissionErrors for Redux Form
      return Promise.reject(new _reduxForm.SubmissionError({
        [location]: message
      }));
    }
  });
};

exports.registerUser = registerUser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbInJlZ2lzdGVyVXNlciIsInVzZXIiLCJkaXNwYXRjaCIsImZldGNoIiwiQVBJX0JBU0VfVVJMIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlcyIsImpzb24iLCJjYXRjaCIsImVyciIsInJlYXNvbiIsIm1lc3NhZ2UiLCJsb2NhdGlvbiIsIlByb21pc2UiLCJyZWplY3QiLCJTdWJtaXNzaW9uRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFTyxNQUFNQSxZQUFZLEdBQUdDLElBQUksSUFBSUMsUUFBUSxJQUFJO0FBQzVDLFNBQU9DLEtBQUssQ0FBRSxHQUFFQyxvQkFBYSxRQUFqQixFQUEwQjtBQUNsQ0MsSUFBQUEsTUFBTSxFQUFFLE1BRDBCO0FBRWxDQyxJQUFBQSxPQUFPLEVBQUU7QUFDTCxzQkFBZ0I7QUFEWCxLQUZ5QjtBQUtsQ0MsSUFBQUEsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQUwsQ0FBZVIsSUFBZjtBQUw0QixHQUExQixDQUFMLENBT0ZTLElBUEUsQ0FPR0MsR0FBRyxJQUFJLG9DQUF3QkEsR0FBeEIsQ0FQVixFQVFGRCxJQVJFLENBUUdDLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxJQUFKLEVBUlYsRUFTRkMsS0FURSxDQVNJQyxHQUFHLElBQUk7QUFBQSxVQUNGQyxNQURFLEdBQzRCRCxHQUQ1QixDQUNGQyxNQURFO0FBQUEsVUFDTUMsT0FETixHQUM0QkYsR0FENUIsQ0FDTUUsT0FETjtBQUFBLFVBQ2VDLFFBRGYsR0FDNEJILEdBRDVCLENBQ2VHLFFBRGY7O0FBRVYsUUFBSUYsTUFBTSxLQUFLLGlCQUFmLEVBQWtDO0FBQzlCO0FBQ0EsYUFBT0csT0FBTyxDQUFDQyxNQUFSLENBQ0gsSUFBSUMsMEJBQUosQ0FBb0I7QUFDaEIsU0FBQ0gsUUFBRCxHQUFZRDtBQURJLE9BQXBCLENBREcsQ0FBUDtBQUtIO0FBQ0osR0FuQkUsQ0FBUDtBQW9CSCxDQXJCTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1Ym1pc3Npb25FcnJvciB9IGZyb20gJ3JlZHV4LWZvcm0nO1xuaW1wb3J0IHsgQVBJX0JBU0VfVVJMIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IG5vcm1hbGl6ZVJlc3BvbnNlRXJyb3JzIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVc2VyID0gdXNlciA9PiBkaXNwYXRjaCA9PiB7XG4gICAgcmV0dXJuIGZldGNoKGAke0FQSV9CQVNFX1VSTH0vdXNlcnNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXIpXG4gICAgfSlcbiAgICAgICAgLnRoZW4ocmVzID0+IG5vcm1hbGl6ZVJlc3BvbnNlRXJyb3JzKHJlcykpXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVhc29uLCBtZXNzYWdlLCBsb2NhdGlvbiB9ID0gZXJyO1xuICAgICAgICAgICAgaWYgKHJlYXNvbiA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcbiAgICAgICAgICAgICAgICAvL0NvbnZlcnQgVmFsaWRhdGlvbkVycm9ycyBpbnRvIFN1Ym1pc3Npb25FcnJvcnMgZm9yIFJlZHV4IEZvcm1cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdWJtaXNzaW9uRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgW2xvY2F0aW9uXTogbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufTsiXX0=